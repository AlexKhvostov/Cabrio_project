> ‚ÑπÔ∏è –ê–∫—Ç—É–∞–ª—å–Ω–∞—è ER-–¥–∏–∞–≥—Ä–∞–º–º–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ [docs/DATABASE_RELATIONS.md](DATABASE_RELATIONS.md)

> **–ü–æ—è—Å–Ω–µ–Ω–∏–µ:** –ó–∞–ø–∏—Å—å –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è –≤ –±–∞–∑–µ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ –±–æ—Ç—É. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –Ω–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π ‚Äî —ç—Ç–æ —Å—Ç–∞—Ç—É—Å "new" –∏–ª–∏ "external". –¢–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º, –æ—Ç–ª–∏—á–Ω—ã–º –æ—Ç "new" –∏ "external", —Å—á–∏—Ç–∞—é—Ç—Å—è –∑–∞–≤–µ—Ä—à–∏–≤—à–∏–º–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∏ –ø–æ–ª—É—á–∞—é—Ç –¥–æ—Å—Ç—É–ø –∫ –æ—Å–Ω–æ–≤–Ω–æ–º—É —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—É.

> –°–º. —Ç–∞–∫–∂–µ: [API](API_METHODS.md), [–†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è](USER_ROLES.md), [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](PROJECT_STRUCTURE.md)

# –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö CabrioRide (–∞–∫—Ç—É–∞–ª—å–Ω–∞—è)

---

## üìã –°–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü

| –¢–∞–±–ª–∏—Ü–∞                  | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ/–û–ø–∏—Å–∞–Ω–∏–µ                                      |
|--------------------------|----------------------------------------------------------|
| ref_roles                | –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π                           |
| ref_statuses             | –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Å—Ç–∞—Ç—É—Å–æ–≤ (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –¥–ª—è –≤—Å–µ—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π)   |
| ref_event_types          | –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ç–∏–ø–æ–≤ —Å–æ–±—ã—Ç–∏–π                                 |
| ref_guide_object_types   | –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Ç–∏–ø–æ–≤ –æ–±—ä–µ–∫—Ç–æ–≤ –≥–∏–¥–∞                           |
| ref_guide_object_kinds   | –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –≤–∏–¥–æ–≤ –≥–∏–¥-–æ–±—ä–µ–∫—Ç–æ–≤ (–ø—Ä–∏–≤—è–∑–∞–Ω –∫ —Ç–∏–ø—É)         |
| ref_car_brands           | –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –º–∞—Ä–æ–∫ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π                           |
| users                    | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã                                   |
| cars                     | –ê–≤—Ç–æ–º–æ–±–∏–ª–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤                                    |
| events                   | –°–æ–±—ã—Ç–∏—è/–º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è                                      |
| business_cards           | –í–∏–∑–∏—Ç–∫–∏/–ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è                                      |
| guide_objects            | –û–±—ä–µ–∫—Ç—ã –≥–∏–¥–∞ (GuideObject)                               |
| reviews                  | –û—Ç–∑—ã–≤—ã –æ GuideObject                                     |
| photos                   | –§–æ—Ç–æ, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –ª—é–±—ã–º–∏ —Å—É—â–Ω–æ—Å—Ç—è–º–∏                      |
| link_user_cars           | –°–≤—è–∑—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π (–≤–ª–∞–¥–µ–ª–µ—Ü, –ø–∞—Å—Å–∞–∂–∏—Ä)   |
| link_event_participants  | –°–≤—è–∑—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏ —Å–æ–±—ã—Ç–∏–π                               |
| moderation_logs          | –ò—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤ —Å –ø—Ä–æ—Ñ–∏–ª—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π   |
| activity_logs            | –ò—Å—Ç–æ—Ä–∏—è –≤—ã–¥–∞—á–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏              |

---

## –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏

### ref_roles
| –ü–æ–ª–µ         | –¢–∏–ø                | –û–ø–∏—Å–∞–Ω–∏–µ                        |
|--------------|--------------------|---------------------------------|
| id           | BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ä–æ–ª–∏   |
| code         | VARCHAR(32)        | –ö–æ–¥ —Ä–æ–ª–∏ (admin, moderator...)  |
| name         | VARCHAR(64)        | –ù–∞–∑–≤–∞–Ω–∏–µ —Ä–æ–ª–∏                   |
| description  | TEXT               | –û–ø–∏—Å–∞–Ω–∏–µ                        |
| color        | VARCHAR(16)        | –¶–≤–µ—Ç –¥–ª—è UI (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)       |

### ref_statuses
| –ü–æ–ª–µ         | –¢–∏–ø                | –û–ø–∏—Å–∞–Ω–∏–µ                        |
|--------------|--------------------|---------------------------------|
| id           | BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å—Ç–∞—Ç—É—Å–∞|
| code         | VARCHAR(32)        | –ö–æ–¥ —Å—Ç–∞—Ç—É—Å–∞ (active, pending...)|
| name         | VARCHAR(64)        | –ù–∞–∑–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞                |
| description  | TEXT               | –û–ø–∏—Å–∞–Ω–∏–µ                        |
| color        | VARCHAR(16)        | –¶–≤–µ—Ç –¥–ª—è UI (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)       |
| entity_type  | VARCHAR(32)        | –î–ª—è –∫–∞–∫–æ–π —Å—É—â–Ω–æ—Å—Ç–∏ (user, car, event) |

### ref_event_types
| –ü–æ–ª–µ         | –¢–∏–ø                | –û–ø–∏—Å–∞–Ω–∏–µ                        |
|--------------|--------------------|---------------------------------|
| id           | BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ç–∏–ø–∞   |
| code         | VARCHAR(32)        | –ö–æ–¥ —Ç–∏–ø–∞ (trip, meetup...)      |
| name         | VARCHAR(64)        | –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–∏–ø–∞                   |
| description  | TEXT               | –û–ø–∏—Å–∞–Ω–∏–µ                        |
| color        | VARCHAR(16)        | –¶–≤–µ—Ç –¥–ª—è UI (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)       |

### ref_guide_object_types
| –ü–æ–ª–µ         | –¢–∏–ø                | –û–ø–∏—Å–∞–Ω–∏–µ                        |
|--------------|--------------------|---------------------------------|
| id           | BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ç–∏–ø–∞   |
| code         | VARCHAR(32)        | –ö–æ–¥ —Ç–∏–ø–∞ (service, cafe...)     |
| name         | VARCHAR(64)        | –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–∏–ø–∞                   |
| description  | TEXT               | –û–ø–∏—Å–∞–Ω–∏–µ                        |
| color        | VARCHAR(16)        | –¶–≤–µ—Ç –¥–ª—è UI (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)       |

### ref_guide_object_kinds
| –ü–æ–ª–µ        | –¢–∏–ø                | –û–ø–∏—Å–∞–Ω–∏–µ                        |
|-------------|--------------------|---------------------------------|
| id          | BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä        |
| type_id     | BIGINT UNSIGNED    | FK –Ω–∞ ref_guide_object_types.id (—Ç–∏–ø) |
| code        | VARCHAR(64)        | –ö–æ–¥ –≤–∏–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "breakfast")      |
| name        | VARCHAR(64)        | –ù–∞–∑–≤–∞–Ω–∏–µ –≤–∏–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–ó–∞–≤—Ç—Ä–∞–∫")   |
| description | TEXT               | –û–ø–∏—Å–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)          |

- type_id –∏ name –≤–º–µ—Å—Ç–µ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç —É–Ω–∏–∫–∞–ª—å–Ω—É—é –ø–∞—Ä—É (–æ–¥–∏–Ω –≤–∏–¥ –Ω–µ –º–æ–∂–µ—Ç –ø–æ–≤—Ç–æ—Ä—è—Ç—å—Å—è –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ —Ç–∏–ø–∞).
- –î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–µ type_id.

---

### ref_car_brands
| –ü–æ–ª–µ         | –¢–∏–ø                | –û–ø–∏—Å–∞–Ω–∏–µ                        |
|--------------|--------------------|---------------------------------|
| id           | BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –º–∞—Ä–∫–∏ |
| brand        | VARCHAR(100)       | –ú–∞—Ä–∫–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è                |

---

## –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (users)
| –ü–æ–ª–µ            | –¢–∏–ø                | –û–ø–∏—Å–∞–Ω–∏–µ                        |
|-----------------|--------------------|---------------------------------|
| id              | BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä        |
| created_at      | TIMESTAMP          | –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏    |
| updated_at      | TIMESTAMP          | –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏  |
| join_date       | DATE               | –î–∞—Ç–∞ –≤—Å—Ç—É–ø–ª–µ–Ω–∏—è –≤ –∫–ª—É–±          |
| left_date       | DATE               | –î–∞—Ç–∞ –≤—ã—Ö–æ–¥–∞ –∏–∑ –∫–ª—É–±–∞            |
| telegram_id     | BIGINT             | Telegram ID (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π)        |
| username        | VARCHAR(100)       | Username –≤ Telegram             |
| first_name_tg   | VARCHAR(100)       | –ò–º—è –∏–∑ —Ç–µ–ª–µ–≥—Ä–∞–º–º–∞               |
| last_name_tg    | VARCHAR(100)       | –§–∞–º–∏–ª–∏—è –∏–∑ —Ç–µ–ª–µ–≥—Ä–∞–º–º–∞           |
| first_name_app  | VARCHAR(100)       | –ò–º—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏                |
| last_name_app   | VARCHAR(100)       | –§–∞–º–∏–ª–∏—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏            |
| birth_date      | DATE               | –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è                   |
| city            | VARCHAR(100)       | –ì–æ—Ä–æ–¥ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è                |
| country         | VARCHAR(100)       | –°—Ç—Ä–∞–Ω–∞ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è               |
| email           | VARCHAR(255)       | Email –∞–¥—Ä–µ—Å                     |
| phone           | VARCHAR(20)        | –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞                  |
| about           | TEXT               | –û —Å–µ–±–µ                          |
| notes           | TEXT               | –ó–∞–º–µ—Ç–∫–∏ (–¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏)     |
| role_id         | BIGINT UNSIGNED    | FK –Ω–∞ ref_roles.id              |
| activity        | INTEGER            | –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (default: 0, –±–µ–∑ –º–∞–∫—Å–∏–º—É–º–∞). –ë–∞–ª–ª—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –∑–∞ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| weight          | INTEGER            | –ª–∞–π–∫–∏ –æ—Ç –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π   |
| messages_count  | INTEGER            | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ Telegram —á–∞—Ç–µ |
| last_activity   | TIMESTAMP          | –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏      |
| host_user_id    | BIGINT UNSIGNED    | –û—Å–Ω–æ–≤–Ω–æ–π –≥–æ—Å—Ç—å                  |
| referrer_id     | BIGINT UNSIGNED    | –†–µ—Ñ–µ—Ä–µ—Ä                         |

> –§–æ—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∞–≤–∞—Ç–∞—Ä) –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–∞–∫ –∑–∞–ø–∏—Å—å —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º id –≤ —Ç–∞–±–ª–∏—Ü–µ photos —Å entity_type = 'user' –∏ entity_id = users.id

---

### user_locations
| –ü–æ–ª–µ        | –¢–∏–ø                | –û–ø–∏—Å–∞–Ω–∏–µ                        |
|-------------|--------------------|---------------------------------|
| id          | BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä        |
| user_id     | BIGINT UNSIGNED    | FK –Ω–∞ users.id                  |
| latitude    | DECIMAL(9,6)       | –®–∏—Ä–æ—Ç–∞                          |
| longitude   | DECIMAL(9,6)       | –î–æ–ª–≥–æ—Ç–∞                         |
| updated_at  | TIMESTAMP          | –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è     |

- –ü—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å—Ç—Ä–æ–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è.
- –î–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ –∫–∞—Ä—Ç–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–∏, –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –Ω–µ –±–æ–ª–µ–µ 60 –º–∏–Ω—É—Ç –Ω–∞–∑–∞–¥.

---

## –ê–≤—Ç–æ–º–æ–±–∏–ª–∏ (cars)
| –ü–æ–ª–µ              | –¢–∏–ø                | –û–ø–∏—Å–∞–Ω–∏–µ                        |
|-------------------|--------------------|---------------------------------|
| id                | BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä        |
| created_at        | TIMESTAMP          | –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏    |
| updated_at        | TIMESTAMP          | –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏  |
| car_brand_id      | BIGINT UNSIGNED    | FK –Ω–∞ ref_car_brands.id         |
| model             | VARCHAR(100)       | –ú–æ–¥–µ–ª—å –∞–≤—Ç–æ–º–æ–±–∏–ª—è (—Ä—É—á–Ω–æ–π –≤–≤–æ–¥) |
| engine_power      | INTEGER            | –ú–æ—â–Ω–æ—Å—Ç—å –¥–≤–∏–≥–∞—Ç–µ–ª—è (–ª.—Å.)       |
| engine_volume     | DECIMAL(3,1)       | –û–±—ä—ë–º –¥–≤–∏–≥–∞—Ç–µ–ª—è (–ª)             |
| color             | VARCHAR(50)        | –¶–≤–µ—Ç –∞–≤—Ç–æ–º–æ–±–∏–ª—è                 |
| year              | INTEGER            | –ì–æ–¥ –≤—ã–ø—É—Å–∫–∞                     |
| reg_number        | VARCHAR(20)        | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –Ω–æ–º–µ—Ä           |
| show_reg_number   | BOOLEAN            | –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–∏ –Ω–æ–º–µ—Ä –ø—É–±–ª–∏—á–Ω–æ    |
| vin               | VARCHAR(17)        | VIN –Ω–æ–º–µ—Ä                       |
| description       | TEXT               | –û–ø–∏—Å–∞–Ω–∏–µ –∞–≤—Ç–æ–º–æ–±–∏–ª—è             |
| create_user_id    | BIGINT UNSIGNED    | –ö—Ç–æ —Å–æ–∑–¥–∞–ª –∑–∞–ø–∏—Å—å               |
| owner_user_id     | BIGINT UNSIGNED    | –¢–µ–∫—É—â–∏–π –≤–ª–∞–¥–µ–ª–µ—Ü                |
| roof_type         | VARCHAR(50)        | –¢–∏–ø –∫—Ä—ã—à–∏                       |
| notes             | TEXT               | –ó–∞–º–µ—Ç–∫–∏ (–¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏)     |
| status_id         | BIGINT UNSIGNED    | FK –Ω–∞ ref_statuses.id           |

> –§–æ—Ç–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—è –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–∞–∫ –∑–∞–ø–∏—Å—å —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º id –≤ —Ç–∞–±–ª–∏—Ü–µ photos —Å entity_type = 'car' –∏ entity_id = cars.id

---

## –°–æ–±—ã—Ç–∏—è (events)
| –ü–æ–ª–µ         | –¢–∏–ø                | –û–ø–∏—Å–∞–Ω–∏–µ                        |
|--------------|--------------------|---------------------------------|
| id           | BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä        |
| created_at   | TIMESTAMP          | –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏    |
| updated_at   | TIMESTAMP          | –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏  |
| event_date   | DATE               | –î–∞—Ç–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è                 |
| event_time   | TIME               | –í—Ä–µ–º—è –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è                |
| event_type_id| BIGINT UNSIGNED    | FK –Ω–∞ ref_event_types.id        |
| title        | VARCHAR(255)       | –ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è                |
| description  | TEXT               | –û–ø–∏—Å–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è                |
| location     | TEXT               | –ú–µ—Å—Ç–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è                |
| city         | VARCHAR(100)       | –ì–æ—Ä–æ–¥ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è                |
| price        | DECIMAL(10,2)      | –°—Ç–æ–∏–º–æ—Å—Ç—å —É—á–∞—Å—Ç–∏—è               |
| max_participants | INTEGER         | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ |
| org_user_id| BIGINT UNSIGNED    | –û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä —Å–æ–±—ã—Ç–∏—è             |
| registration_type | VARCHAR(20)    | –¢–∏–ø —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (—Å–≤–æ–±–æ–¥–Ω–∞—è/–ø–æ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—é/—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º) |
| status_id    | BIGINT UNSIGNED    | FK –Ω–∞ ref_statuses.id           |

> –§–æ—Ç–æ —Å–æ–±—ã—Ç–∏—è –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–∞–∫ –∑–∞–ø–∏—Å—å —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º id –≤ —Ç–∞–±–ª–∏—Ü–µ photos —Å entity_type = 'event' –∏ entity_id = events.id

---

## –í–∏–∑–∏—Ç–∫–∏/–ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è (business_cards)
| –ü–æ–ª–µ              | –¢–∏–ø                | –û–ø–∏—Å–∞–Ω–∏–µ                        |
|-------------------|--------------------|---------------------------------|
| id                | BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä        |
| created_at        | TIMESTAMP          | –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏    |
| updated_at        | TIMESTAMP          | –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏  |
| car_id            | BIGINT UNSIGNED    | –í–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ –∑–∞–º–µ—á–µ–Ω–Ω—ã–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å |
| location          | TEXT               | –ì–¥–µ –±—ã–ª–∞ –æ—Å—Ç–∞–≤–ª–µ–Ω–∞ –≤–∏–∑–∏—Ç–∫–∞      |
| notes             | TEXT               | –ó–∞–º–µ—Ç–∫–∏ –æ –º–∞—à–∏–Ω–µ/—Å–∏—Ç—É–∞—Ü–∏–∏       |
| inviter_user_id | BIGINT UNSIGNED    | –ö—Ç–æ –æ—Å—Ç–∞–≤–∏–ª –≤–∏–∑–∏—Ç–∫—É             |

---

## GuideObject (guide_objects)
| –ü–æ–ª–µ         | –¢–∏–ø                | –û–ø–∏—Å–∞–Ω–∏–µ                        |
|--------------|--------------------|---------------------------------|
| id           | BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä        |
| created_at   | TIMESTAMP          | –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏    |
| updated_at   | TIMESTAMP          | –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏  |
| guide_object_type_id | BIGINT UNSIGNED  | FK –Ω–∞ ref_guide_object_types.id|
| guide_object_kind_id | BIGINT UNSIGNED    | FK –Ω–∞ ref_guide_object_kinds.id |
| name         | VARCHAR(255)       | –ù–∞–∑–≤–∞–Ω–∏–µ                        |
| city         | VARCHAR(100)       | –ì–æ—Ä–æ–¥                           |
| address      | TEXT               | –ê–¥—Ä–µ—Å                           |
| website      | VARCHAR(255)       | –í–µ–±-—Å–∞–π—Ç                        |
| phone        | VARCHAR(20)        | –¢–µ–ª–µ—Ñ–æ–Ω                         |
| Instagram    | VARCHAR(255)       | –°—Å—ã–ª–∫–∞ –Ω–∞ Instagram             |
| Telegram     | VARCHAR(255)       | –°—Å—ã–ª–∫–∞ –Ω–∞ Telegram              |
| Viber        | VARCHAR(255)       | –ù–æ–º–µ—Ä Viber                     |
| WhatsApp     | VARCHAR(255)       | –ù–æ–º–µ—Ä WhatsApp                  |
| description  | TEXT               | –û–ø–∏—Å–∞–Ω–∏–µ                        |
| service_list | VARCHAR[]          | –°–ø–∏—Å–æ–∫ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º—ã—Ö —É—Å–ª—É–≥    |
| price        | DECIMAL(10,2)      | –¶–µ–Ω–∞ (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)           |
| brand        | VARCHAR(100)       | –ë—Ä–µ–Ω–¥ (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)          |
| add_user_id  | BIGINT UNSIGNED    | –ö—Ç–æ –¥–æ–±–∞–≤–∏–ª                     |
| status_id    | BIGINT UNSIGNED    | FK –Ω–∞ ref_statuses.id           |

> –§–æ—Ç–æ GuideObject –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–∞–∫ –∑–∞–ø–∏—Å—å —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º id –≤ —Ç–∞–±–ª–∏—Ü–µ photos —Å entity_type = 'guide_object' –∏ entity_id = guide_objects.id

---

## –û—Ç–∑—ã–≤—ã (reviews)
| –ü–æ–ª–µ           | –¢–∏–ø                | –û–ø–∏—Å–∞–Ω–∏–µ                        |
|----------------|--------------------|---------------------------------|
| id             | BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä        |
| created_at     | TIMESTAMP          | –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏    |
| updated_at     | TIMESTAMP          | –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏  |
| guide_object_id| BIGINT UNSIGNED    | –í–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ guide_objects.id|
| rating         | INTEGER            | –û—Ü–µ–Ω–∫–∞ (1-5, —É—Å—Ç–∞—Ä–µ–≤—à–µ–µ –ø–æ–ª–µ, –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏) |
| quality_rating | TINYINT            | –û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ (1‚Äì10)          |
| speed_rating   | TINYINT            | –û—Ü–µ–Ω–∫–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏ (1‚Äì10)          |
| price_rating   | TINYINT            | –û—Ü–µ–Ω–∫–∞ —Ü–µ–Ω—ã (1‚Äì10)              |
| feedback       | TEXT               | –¢–µ–∫—Å—Ç –æ—Ç–∑—ã–≤–∞                    |
| author_user_id | BIGINT UNSIGNED    | –ê–≤—Ç–æ—Ä –æ—Ç–∑—ã–≤–∞                    |
| status_id      | BIGINT UNSIGNED    | FK –Ω–∞ ref_statuses.id           |

> –§–æ—Ç–æ –∫ –æ—Ç–∑—ã–≤—É –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–∞–∫ –≤—Å–µ –∑–∞–ø–∏—Å–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ photos —Å entity_type = 'review' –∏ entity_id = reviews.id

---

## –§–æ—Ç–æ (photos)
| –ü–æ–ª–µ         | –¢–∏–ø                | –û–ø–∏—Å–∞–Ω–∏–µ                                  |
|--------------|--------------------|-------------------------------------------|
| id           | BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ñ–æ—Ç–æ             |
| entity_type  | VARCHAR(32)        | –¢–∏–ø —Å—É—â–Ω–æ—Å—Ç–∏ (user, car, event, review...)|
| entity_id    | BIGINT UNSIGNED    | ID —Å—É—â–Ω–æ—Å—Ç–∏, –∫ –∫–æ—Ç–æ—Ä–æ–π –ø—Ä–∏–≤—è–∑–∞–Ω–æ —Ñ–æ—Ç–æ     |
| file_name    | VARCHAR(255)       | –ò–º—è —Ñ–∞–π–ª–∞                                 |
| url          | VARCHAR(255)       | –ü—É—Ç—å/URL –∫ —Ñ–∞–π–ª—É                          |
| description  | TEXT               | –û–ø–∏—Å–∞–Ω–∏–µ/–ø–æ–¥–ø–∏—Å—å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)            |
| uploaded_at  | TIMESTAMP          | –î–∞—Ç–∞ –∑–∞–≥—Ä—É–∑–∫–∏                             |
| uploaded_by  | BIGINT UNSIGNED    | –ö—Ç–æ –∑–∞–≥—Ä—É–∑–∏–ª (user_id)                    |

> –ì–ª–∞–≤–Ω–æ–µ —Ñ–æ—Ç–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–∞–∫ –∑–∞–ø–∏—Å—å —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º id –¥–ª—è –¥–∞–Ω–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç–∏ (entity_type, entity_id)

---


### map_hints
| –ü–æ–ª–µ        | –¢–∏–ø                | –û–ø–∏—Å–∞–Ω–∏–µ                                 |
|-------------|--------------------|------------------------------------------|
| id          | BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –º–µ—Ç–∫–∏           |
| user_id     | BIGINT UNSIGNED    | FK –Ω–∞ users.id (–∫—Ç–æ –ø–æ—Å—Ç–∞–≤–∏–ª)            |
| type        | VARCHAR(32)        | –¢–∏–ø –ø–æ–¥—Å–∫–∞–∑–∫–∏ ("–ì–ê–ò", "—Ä–µ–º–æ–Ω—Ç", "–ø—Ä–æ–±–∫–∞", "–∞–≤–∞—Ä–∏—è") |
| latitude    | DECIMAL(9,6)       | –®–∏—Ä–æ—Ç–∞                                   |
| longitude   | DECIMAL(9,6)       | –î–æ–ª–≥–æ—Ç–∞                                  |
| created_at  | TIMESTAMP          | –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è                           |
| expires_at  | TIMESTAMP          | –í—Ä–µ–º—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è           |
| active      | BOOLEAN            | –ê–∫—Ç–∏–≤–Ω–∞ –ª–∏ –º–µ—Ç–∫–∞ (true/false)            |
| removed_by  | BIGINT UNSIGNED    | FK –Ω–∞ users.id (–∫—Ç–æ —É–¥–∞–ª–∏–ª, –µ—Å–ª–∏ —É–¥–∞–ª–µ–Ω–æ –≤—Ä—É—á–Ω—É—é) |
| removed_at  | TIMESTAMP          | –í—Ä–µ–º—è —É–¥–∞–ª–µ–Ω–∏—è (–µ—Å–ª–∏ —É–¥–∞–ª–µ–Ω–æ –≤—Ä—É—á–Ω—É—é)    |

>  –ú–µ—Ç–∫–∞ –≤–∏–¥–Ω–∞ –≤—Å–µ–º –Ω–∞ –∫–∞—Ä—Ç–µ –≤ —Ç–µ—á–µ–Ω–∏–µ 1 —á–∞—Å–∞ –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è, –∑–∞—Ç–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–π.
>  –ê–≤—Ç–æ—Ä –º–µ—Ç–∫–∏ –∏–ª–∏ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä/–∞–¥–º–∏–Ω/root –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å –º–µ—Ç–∫—É –≤—Ä—É—á–Ω—É—é.
>  –í –±–∞–∑–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–º, –∫—Ç–æ –ø–æ—Å—Ç–∞–≤–∏–ª –∏ –∫—Ç–æ —É–¥–∞–ª–∏–ª –º–µ—Ç–∫—É. 


---

## moderation_logs

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
–¢–∞–±–ª–∏—Ü–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤ —Å –ø—Ä–æ—Ñ–∏–ª—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–∞–∫—Ç–∏–≤–∞—Ü–∏—è, –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∏ —Ç.–¥.). –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å, –∞—É–¥–∏—Ç –∏ –∞–Ω–∞–ª–∏–∑ —Ä–∞–±–æ—Ç—ã –º–æ–¥–µ—Ä–∞—Ü–∏–∏.

**–ü–æ–ª—è:**
| –ü–æ–ª–µ         | –¢–∏–ø            | –û–ø–∏—Å–∞–Ω–∏–µ                                              |
|--------------|----------------|-------------------------------------------------------|
| id           | BIGINT, PK     | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–ø–∏—Å–∏                       |
| user_id      | BIGINT, FK     | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —á–µ–π –ø—Ä–æ—Ñ–∏–ª—å –º–æ–¥–µ—Ä–∏—Ä—É–µ—Ç—Å—è             |
| moderator_id | BIGINT, FK     | ID –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞, –≤—ã–ø–æ–ª–Ω–∏–≤—à–µ–≥–æ –¥–µ–π—Å—Ç–≤–∏–µ                  |
| action       | ENUM           | –¢–∏–ø –¥–µ–π—Å—Ç–≤–∏—è: 'activate', 'decline', 'block', 'unblock', 'edit' |
| reason       | VARCHAR(255)   | –ü—Ä–∏—á–∏–Ω–∞ (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏)    |
| created_at   | DATETIME       | –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –¥–µ–π—Å—Ç–≤–∏—è                                 |

**–°–≤—è–∑–∏:**
- user_id ‚Äî –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ users(id)
- moderator_id ‚Äî –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ users(id)

**–ò–Ω–¥–µ–∫—Å—ã:**
- idx_user_id (user_id)
- idx_moderator_id (moderator_id)
- idx_action (action)
- idx_created_at (created_at)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ –∏ –∞—É–¥–∏—Ç–∞
- reason –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è/–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
- –¢–∞–±–ª–∏—Ü–∞ —Ä–∞—Å—à–∏—Ä—è–µ–º–∞ (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Ç–∏–ø—ã –¥–µ–π—Å—Ç–≤–∏–π)

---

## activity_logs

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:**
–¢–∞–±–ª–∏—Ü–∞ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –≤—ã–¥–∞—á–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –ª–∏–º–∏—Ç–æ–≤ (1 —Ä–∞–∑ –≤ —Å—É—Ç–∫–∏ –æ–¥–Ω–æ–º—É —á–µ–ª–æ–≤–µ–∫—É, –º–∞–∫—Å–∏–º—É–º N –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π –≤ –¥–µ–Ω—å) –∏ –∞—É–¥–∏—Ç–∞.

**–ü–æ–ª—è:**
| –ü–æ–ª–µ         | –¢–∏–ø                | –û–ø–∏—Å–∞–Ω–∏–µ                                 |
|--------------|--------------------|------------------------------------------|
| id           | BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–ø–∏—Å–∏          |
| from_user_id | BIGINT UNSIGNED    | FK –Ω–∞ users.id (–∫—Ç–æ –ø–æ—Å—Ç–∞–≤–∏–ª –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å)    |
| to_user_id   | BIGINT UNSIGNED    | FK –Ω–∞ users.id (–∫–æ–º—É –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å)  |
| date         | DATE               | –î–∞—Ç–∞ –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (–±–µ–∑ –≤—Ä–µ–º–µ–Ω–∏)    |
| created_at   | DATETIME           | –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏          |

**–°–≤—è–∑–∏:**
- from_user_id ‚Äî –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ users(id)
- to_user_id ‚Äî –≤–Ω–µ—à–Ω–∏–π –∫–ª—é—á –Ω–∞ users(id)

**–ò–Ω–¥–µ–∫—Å—ã:**
- idx_from_user_id (from_user_id)
- idx_to_user_id (to_user_id)
- idx_date (date)
- idx_created_at (created_at)
- UNIQUE (from_user_id, to_user_id, date) ‚Äî —á—Ç–æ–±—ã –Ω–µ–ª—å–∑—è –±—ã–ª–æ –ø–æ—Å—Ç–∞–≤–∏—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –æ–¥–Ω–æ–º—É —á–µ–ª–æ–≤–µ–∫—É –±–æ–ª–µ–µ 1 —Ä–∞–∑–∞ –≤ —Å—É—Ç–∫–∏

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –ª–∏–º–∏—Ç–æ–≤ –∏ –∏—Å—Ç–æ—Ä–∏–∏
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –±—ã—Å—Ç—Ä–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —Å—Ç–∞–≤–∏–ª –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–µ–≥–æ–¥–Ω—è –∏ —Å–∫–æ–ª—å–∫–æ –≤—Å–µ–≥–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π —Ä–∞–∑–¥–∞–ª –∑–∞ —Å—É—Ç–∫–∏
- created_at —Ö—Ä–∞–Ω–∏—Ç —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è, date ‚Äî —Ç–æ–ª—å–∫–æ –¥–∞—Ç—É –¥–ª—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏

---

## –¢–∞–±–ª–∏—Ü—ã —Å–≤—è–∑–µ–π

### link_user_cars
| –ü–æ–ª–µ    | –¢–∏–ø                | –û–ø–∏—Å–∞–Ω–∏–µ                        |
|---------|--------------------|---------------------------------|
| user_id | BIGINT UNSIGNED    | FK –Ω–∞ users.id                  |
| car_id  | BIGINT UNSIGNED    | FK –Ω–∞ cars.id                   |
| role_id | BIGINT UNSIGNED    | FK –Ω–∞ ref_roles.id              |
| PK      | (user_id, car_id, role_id) | –ö–æ–º–ø–æ–∑–∏—Ç–Ω—ã–π –∫–ª—é—á           |

### link_event_participants
| –ü–æ–ª–µ        | –¢–∏–ø                | –û–ø–∏—Å–∞–Ω–∏–µ                                  |
|-------------|--------------------|-------------------------------------------|
| event_id    | BIGINT UNSIGNED    | FK –Ω–∞ events.id                           |
| user_id     | BIGINT UNSIGNED    | FK –Ω–∞ users.id                            |
| confidence  | VARCHAR(20)        | –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å —É—á–∞—Å—Ç–∏—è: 'yes', 'maybe', 'no' |
| plus_one    | BOOLEAN            | –ë—É–¥–µ—Ç –ª–∏ +1 (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∂–µ–Ω–∞/–¥—Ä—É–≥)         |
| created_at  | TIMESTAMP          | –î–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ —É—á–∞—Å—Ç–Ω–∏–∫–∏               |
| PK          | (event_id, user_id)| –ö–æ–º–ø–æ–∑–∏—Ç–Ω—ã–π –∫–ª—é—á                          | 

---

## –í–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏ –∏ —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏

### ref_roles
- –ù–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–Ω–µ—à–Ω–∏—Ö –∫–ª—é—á–µ–π

### ref_statuses
- –ù–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–Ω–µ—à–Ω–∏—Ö –∫–ª—é—á–µ–π

### ref_event_types
- –ù–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–Ω–µ—à–Ω–∏—Ö –∫–ª—é—á–µ–π

### ref_guide_object_types
- –ù–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–Ω–µ—à–Ω–∏—Ö –∫–ª—é—á–µ–π

### ref_car_brands
- PK: id
- INDEX: brand

### users
| –ü–æ–ª–µ      | –°–≤—è–∑—å                        |
|-----------|------------------------------|
| role_id   | FK ‚Üí ref_roles.id            |

### cars
| –ü–æ–ª–µ            | –°–≤—è–∑—å                        |
|-----------------|------------------------------|
| car_brand_id    | FK ‚Üí ref_car_brands.id       |
| create_user_id  | FK ‚Üí users.id                |
| owner_user_id   | FK ‚Üí users.id                |
| status_id       | FK ‚Üí ref_statuses.id         |

### events
| –ü–æ–ª–µ            | –°–≤—è–∑—å                        |
|-----------------|------------------------------|
| event_type_id   | FK ‚Üí ref_event_types.id      |
| org_user_id   | FK ‚Üí users.id                |
| status_id       | FK ‚Üí ref_statuses.id         |

### business_cards
| –ü–æ–ª–µ              | –°–≤—è–∑—å                        |
|-------------------|------------------------------|
| car_id            | FK ‚Üí cars.id                 |
| inviter_user_id | FK ‚Üí users.id                |

### guide_objects
| –ü–æ–ª–µ            | –°–≤—è–∑—å                        |
|-----------------|------------------------------|
| guide_object_type_id | FK ‚Üí ref_guide_object_types.id |
| guide_object_kind_id | FK ‚Üí ref_guide_object_kinds.id|
| add_user_id     | FK ‚Üí users.id                |
| status_id       | FK ‚Üí ref_statuses.id         |

### reviews
| –ü–æ–ª–µ            | –°–≤—è–∑—å                        |
|-----------------|------------------------------|
| guide_object_id | FK ‚Üí guide_objects.id        |
| author_user_id  | FK ‚Üí users.id                |
| status_id       | FK ‚Üí ref_statuses.id         |

### photos
| –ü–æ–ª–µ         | –°–≤—è–∑—å                        |
|--------------|------------------------------|
| entity_type  | (–ª–æ–≥–∏—á–µ—Å–∫–∞—è —Å–≤—è–∑—å, –Ω–µ FK)    |
| entity_id    | (–ª–æ–≥–∏—á–µ—Å–∫–∞—è —Å–≤—è–∑—å, –Ω–µ FK)    |
| uploaded_by  | FK ‚Üí users.id                | 

### user_locations
| –ü–æ–ª–µ      | –°–≤—è–∑—å                        |
|-----------|------------------------------|
| user_id   | FK ‚Üí users.id                |

### map_hints
| –ü–æ–ª–µ        | –°–≤—è–∑—å                        |
|-------------|------------------------------|
| user_id     | FK ‚Üí users.id                |
| removed_by  | FK ‚Üí users.id (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)  |

### moderation_logs
| –ü–æ–ª–µ        | –°–≤—è–∑—å                        |
|-------------|------------------------------|
| user_id     | FK ‚Üí users.id                |
| moderator_id| FK ‚Üí users.id                |

### activity_logs
| –ü–æ–ª–µ         | –°–≤—è–∑—å                        |
|--------------|------------------------------|
| from_user_id | FK ‚Üí users.id                |
| to_user_id   | FK ‚Üí users.id                |

### ref_guide_object_kinds
| –ü–æ–ª–µ    | –°–≤—è–∑—å                        |
|---------|------------------------------|
| type_id | FK ‚Üí ref_guide_object_types.id|

---

## –ò–Ω–¥–µ–∫—Å—ã –∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### ref_roles
- PK: id
- UNIQUE: code

### ref_statuses
- PK: id
- UNIQUE: code, (entity_type, code)

### ref_event_types
- PK: id
- UNIQUE: code

### ref_guide_object_types
- PK: id
- UNIQUE: code

### ref_car_brands
- PK: id
- INDEX: brand

### users
- PK: id
- UNIQUE: telegram_id, email, phone
- INDEX: role_id

### cars
- PK: id
- INDEX: car_brand_id, create_user_id, owner_user_id, status_id
- UNIQUE: vin, reg_number

### events
- PK: id
- INDEX: event_type_id, org_user_id, status_id, event_date

### business_cards
- PK: id
- INDEX: car_id, inviter_user_id

### guide_objects
- PK: id
- INDEX: guide_object_type_id, guide_object_kind_id, add_user_id, status_id, city
- UNIQUE: (name, city)

### reviews
- PK: id
- INDEX: guide_object_id, author_user_id, status_id
- UNIQUE: (guide_object_id, author_user_id)

### photos
- PK: id
- INDEX: (entity_type, entity_id), uploaded_by

### link_user_cars
- PK: (user_id, car_id, role_id)
- INDEX: user_id, car_id, role_id

### link_event_participants
- PK: (event_id, user_id)
- INDEX: event_id, user_id 

### user_locations
- PK: id
- INDEX: user_id, updated_at

### map_hints
- PK: id
- INDEX: user_id, type, created_at, expires_at, active
- INDEX: removed_by

### moderation_logs
- PK: id
- INDEX: user_id, moderator_id, action, created_at

### activity_logs
- PK: id
- INDEX: from_user_id, to_user_id, created_at
- UNIQUE: (from_user_id, to_user_id, date)

### ref_guide_object_kinds
- PK: id
- UNIQUE: (type_id, name)
- INDEX: type_id

---

## ER-–¥–∏–∞–≥—Ä–∞–º–º–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

> –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–µ–ø–µ—Ä—å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ docs/DATABASE_RELATIONS.md (Mermaid-–¥–∏–∞–≥—Ä–∞–º–º–∞). 
