> См. также: [Frontend ТЗ](FRONTEND_SPEC.md), [Пользовательские сценарии](USER_FLOWS.md), [Структура проекта](PROJECT_STRUCTURE.md)

# APP_SECTIONS.md
# Разделы приложения CabrioRide

## 1. Статистика клуба
- **Назначение:** Просмотр общей статистики, аналитики и отчётов по клубу.
- **Основные сценарии:**
    - Просмотр ключевых метрик клуба
    - Анализ активности участников
- **Ключевые компоненты:**
    - [StatsDashboard](APP_COMPONENTS.md#statsdashboard)
    - [ChartBlock](APP_COMPONENTS.md#chartblock)

---

## 2. Пользователи
- **Назначение:** Управление списком участников, просмотр профилей, изменение статусов.
- **Основные сценарии:**
    - Просмотр списка участников
    - Просмотр и редактирование профиля
    - Управление ролями и статусами
- **Ключевые компоненты:**
    - [UserCard](APP_COMPONENTS.md#usercard)
    - [UserProfile](APP_COMPONENTS.md#userprofile)
    - [StatusIndicator](APP_COMPONENTS.md#statusindicator)

---

## 3. Автомобили
- **Назначение:** Каталог автомобилей, просмотр карточек, управление пассажирами.
- **Основные сценарии:**
    - Просмотр каталога автомобилей
    - Просмотр карточки автомобиля
    - Добавление/редактирование информации
- **Ключевые компоненты:**
    - [CarCard](APP_COMPONENTS.md#carcard)
    - [CarProfile](APP_COMPONENTS.md#carprofile)

---

## 4. Карта
- **Назначение:** Отображение участников на карте в реальном времени.
- **Основные сценарии:**
    - Просмотр своего положения и других участников
    - Получение информации о статусе активности участников
- **Ключевые компоненты:**
    - [MapView](APP_COMPONENTS.md#mapview)
    - [UserCard](APP_COMPONENTS.md#usercard)
    - [StatusIndicator](APP_COMPONENTS.md#statusindicator)
    - [PushToTalkButton](APP_COMPONENTS.md#pushtotalkbutton)
    - [VoiceMessagePlayer](APP_COMPONENTS.md#voicemessageplayer)
    - [VoiceMessageList](APP_COMPONENTS.md#voicemessagelist)
- **Особенности UX:**
    - При входе запрашивается разрешение на геолокацию
    - Если пользователь не дал разрешение на использование геолокации или отключил передачу координат через переключатель, карта начинает плавно исчезать: сначала становится чёрно-белой, затем прозрачной, и полностью скрывается через 20 секунд.
    - После исчезновения карты появляется уведомление, что для просмотра карты нужно разрешить использование координат.
    - По умолчанию карта центрируется на Минске (Беларусь), если координаты пользователя недоступны
    - После разрешения передачи координат появляется переключатель "Показывать меня на карте" — пользователь может в любой момент отключить передачу координат
    - Координаты обновляются каждые 10 секунд
    - Цветной индикатор статуса на аватарке: зелёный (<1 мин), оранжевый (1–5 мин), серый (5–20 мин), >20 мин — не отображается
    - Доступ к карте ограничен по ролям/статусам

    #### Рация (Push-to-Talk)
    - В правом нижнем углу карты размещается кнопка-микрофон для записи голосовых сообщений (до 30 секунд).
    - После отправки аудиофайл сохраняется на сервере и автоматически рассылается всем участникам, которые сейчас отображаются на карте.
    - Голосовые сообщения рассылаются только тем пользователям, которые передают свои координаты (то есть приложение отправляет их на сервер).
    - Если пользователь перестал передавать координаты (закрыл карту, отключил передачу или не обновлял координаты более 20 минут), он перестаёт получать новые голосовые сообщения.
    - Даже если приложение свернуто или в фоне, но координаты продолжают отправляться, пользователь получит все сообщения и сможет прослушать их позже через список сообщений.
    - Входящие сообщения автоматически воспроизводятся по очереди, если пользователь не записывает своё сообщение.
    - Если пользователь записывает своё сообщение, новые входящие сообщения становятся в очередь и воспроизводятся после завершения записи.
    - На карте есть отдельная кнопка “Список сообщений”, где можно прослушать последние 10 голосовых сообщений.
    - Сообщения автоматически удаляются с сервера через 1 час.

    #### Подсказки на карте (социальные отметки)
    - На карте есть кнопка “Добавить подсказку”.
    - При нажатии открывается меню с выбором типа подсказки: “ГАИ”, “Ремонт”, “Пробка”, “Авария” и др.
    - После выбора типа подсказки и фиксации координат, на карте у всех участников появляется соответствующий маркер (например, пульсирующая мигалка для “ГАИ”).
    - Метка видна всем на карте в течение 1 часа, затем исчезает автоматически.
    - Автор метки или модератор/админ/root может удалить метку, нажав на неё дважды.
    - В базе сохраняется информация о том, кто поставил метку (user_id).
    - Можно добавить новые типы подсказок по мере необходимости.

---

## 5. Мероприятия и события
- **Назначение:** Календарь событий, организация и участие в мероприятиях.
- **Основные сценарии:**
    - Просмотр календаря
    - Регистрация на мероприятие
    - Просмотр участников события
- **Ключевые компоненты:**
    - [EventCalendar](APP_COMPONENTS.md#eventcalendar)
    - [EventCard](APP_COMPONENTS.md#eventcard)

---

## 6. Гид
- **Назначение:** Каталог объектов (гид), отзывов.
- **Основные сценарии:**
    - Просмотр объектов
    - Оставить отзыв
- **Ключевые компоненты:**
    - [GuideObjectCard](APP_COMPONENTS.md#guideobjectcard)
    - [ReviewBlock](APP_COMPONENTS.md#reviewblock)

---

## 7. Настройки
- **Назначение:** Управление личным профилем, доступами, конфигурацией.
- **Основные сценарии:**
    - Редактирование профиля
    - Настройка уведомлений
- **Ключевые компоненты:**
    - [SettingsForm](APP_COMPONENTS.md#settingsform) 